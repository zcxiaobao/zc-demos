## å‰è¨€

å¤æ—¥æ˜¯ç‚çƒ­çš„é…·æš‘ï¼Œä¹Ÿæ˜¯æ¿€æ˜‚çš„å²æœˆï¼Œå†æœ‰ä¸€å‘¨ï¼Œé’æ˜¥çš„é£æš´å°†å©å“å¤§å­¦ä¹‹é—¨ï¼Œå¼€å¯å¼‚å½©çº·å‘ˆçš„äººç”Ÿæ—…é€”ã€‚é«˜è€ƒï¼Œæˆ–è®¸ä½ å·²ç»ç»å†è¿‡ï¼Œæˆ–è®¸ä½ æ­£è¦ç»å†ï¼Œå¯¹è¿™æ‰¹å³å°†ç™»ä¸Šè€ƒåœºçš„é’æ˜¥é£æš´ï¼Œä½ æ˜¯å¦**æœ‰äº›ç¥ç¦è¦è®²ï¼Œæœ‰äº›ç»éªŒè¦è°ˆï¼Œæœ‰äº›è¿‡å¾€è¦å¿†ï¼Œæœ‰äº›ç¾å¥½è¦è¿°**ï¼Œæ¬¢è¿åœ¨è¯„è®ºä¸­è¡¨è¿°ä½ çš„æƒ³æ³•å’Œç¥ç¦ï¼Œå°åŒ…ä¼šåŠæ—¶çš„å°†ä½ çš„ç¥ç¦æ›´æ–°åˆ°å¢™ä¸Šï¼ŒåŒæ—¶å°åŒ…ä¹Ÿä¼šå°†æ­¤ç½‘é¡µè½¬å‘ç»™å³å°†é«˜è€ƒçš„ä¼™ä¼´ä»¬ï¼Œä¹Ÿæ¬¢è¿å¤§å®¶è½¬å‘ã€‚

## æƒ³æ³•

å¦¹å¦¹å°±æ˜¯ä»Šå¹´é«˜è€ƒå¤§å†›ä¸­çš„ä¸€å‘˜ï¼Œé«˜è€ƒè¶Šæ¥è¶Šè¿‘ï¼Œå‹åŠ›ä¹Ÿæ—¥æ¸å¢å¤§ï¼Œå°åŒ…å’Œå®¶äººä¹Ÿæ‰¿å—ç€åŒæ ·çš„ç´§å¼ ã€‚é«˜è€ƒå¹¶ä¸ç®€å•ï¼Œè¿™æ˜¯ä¸€åœºå‹‡æ°”ä¸å¿ƒæ€çš„è¾ƒé‡ï¼Œä½œä¸ºåŠ æ²¹åŠ©å¨å›¢ï¼Œå°åŒ…å°±å®ç°ä¸ªç¥ç¦å¢™å§ã€‚

ç¥ç¦å¢™ä¸­å°åŒ…åŠ å…¥äº†å¾ˆå¤šå°å¿ƒæ€ï¼Œä¸‹é¢å…ˆè·Ÿå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚

**Case1ï¼šèƒŒæ™¯**

![](./images/bg2.jpg)

èƒŒæ™¯å°åŒ…é€‰ç”¨"ä¸€è¯­åŒå…³"çš„æ–¹å¼ï¼Œè¿™æ—¢æ˜¯é«˜ä¸­çš„å…¥å­¦ä»ªå¼ï¼Œå¸Œæœ›å­¦å­ä»¬èƒ½æ°¸è¿œçš„è®°ä½é«˜ä¸­çš„é’æ˜¥å²æœˆï¼›å¦ä¸€æ–¹é¢å°åŒ…å¸Œæœ›è¿™ä¹Ÿæ˜¯å¤§å­¦çš„å…¥å­¦ä»ªå¼ï¼Œå¸Œæœ›å­¦å­ä»¬éƒ½å¦‚æ„¿ä»¥å¿ã€‚

**Case2ï¼šä¸ƒå½©ç¥ç¦è¯­**

ç¥ç¦è¯­çš„é¢œè‰²å°åŒ…æƒ³äº†å¾ˆä¹…ï¼Œæœ€ç»ˆé€‰æ‹©äº† ğŸŒˆ çš„é¢œè‰²(å…¶ä¸­å‡ ä¸ªé¢œè‰²ç¨å¾®å˜åŠ¨äº†ä¸€ç‚¹)ï¼Œå¸Œæœ›å¹´è½»çš„æ ‹æ¢ä»¬éƒ½èƒ½è§è¯†é£é›¨ä¹‹åçš„å½©è™¹ï¼Œä¹Ÿèƒ½æ‹¥æœ‰ä¸ƒå½©çš„å¤§å­¦ç”Ÿæ´»ã€‚

**Case3ï¼šç¥ç¦å¡ç‰‡çš„èƒŒæ™¯**

![](./images/hope-card.png)

ç²¾æŒ‘ç»†é€‰ï¼Œå°åŒ…æœ€åé€‰ç”¨äº†äº”ç§èƒŒæ™¯:

- æ°´æµèƒŒæ™¯: "ä¸Šå–„è‹¥æ°´ï¼Œæ°´å–„åˆ©ä¸‡ç‰©è€Œä¸äº‰"ï¼Œå°åŒ…å¸Œæœ›æ¯ä½å­¦å­è€ƒè¯•ä¸­ï¼Œéƒ½å¹³é™å¦‚æ°´ï¼Œå¿ƒæ€ä¸ºç‹ã€‚
- æ¯•ä¸šèƒŒæ™¯: å¤æ—¥çš„æ¯•ä¸šå¦‚å¤èŠ±ä¸€èˆ¬ç»šçƒ‚ï¼Œå¤æ—¥çš„ç¹æ˜Ÿç‚¹ç‚¹æœªå°ä¸æ˜¯æ¯ä¸ªå­¦å­çš„è¿‡å¾€ç²¾å½©ï¼Œè¿™ä¸ªå¤å¤©å¸Œæœ›å¯ä»¥æ— æ€¨æ— æ‚”ã€å¿«ä¹æ— å¿§çš„æ¯•ä¸šã€‚
- è¿œèˆªèƒŒæ™¯: æ¯ä¸ªäººéƒ½æœ‰ä¸€è‰˜èˆ¹ï¼Œä½ ä¼šé€‰æ‹©è¿œèˆªå—ï¼Ÿä½ æ˜¯æŒèˆµäººï¼Œä½ å†³å®šï¼
- å­¦ä¹ èƒŒæ™¯: è¿™ä¸ªå°åŒ…æ²¡æƒ³åˆ°å¥½çš„è¡¨è¾¾ï¼Œå…¶å®æ„æ€æ˜¯å¾ˆç®€å•çš„ï¼Œåšä¹¦çš„ä¸»äººï¼Œå¼€å¿ƒå¿«ä¹çš„å­¦ä¹ ï¼Œé¡ºåˆ©å®Œæˆé«˜è€ƒã€‚
- æ´»åŠ›èƒŒæ™¯: ç»¿è‰²ï¼Œæ„å‘³ç€ç”Ÿæœºï¼Œæ„å‘³ç€æ´»åŠ›ï¼Œæ–°çš„å­¦å­æ˜¯å›½å®¶æœªæ¥å‘å±•çš„æ´»æ°´ï¼Œå¸Œæœ›èƒ½ç»™ç–«æƒ…çš„å²æœˆä¸­åŠ å…¥æ— å°½çš„æ´»åŠ›ã€‚

**Case4ï¼šç¥ç¦è€…å¤´åƒ**

æ¯ä¸ªç¥ç¦è€…çš„å¤´åƒå°åŒ…ç»™åŠ å…¥äº†ç”ŸåŠ¨çš„åŠ¨æ•ˆæ•ˆæœï¼Œå¸Œæœ›ä½ ä»¬å¯ä»¥æ„Ÿå—åˆ°ç¥ç¦çš„çœŸæŒšå’Œå–„è‰¯çš„å¿ƒçµã€‚

## å®ç°

ä¸‹é¢å°åŒ…æ¥è®²ä¸€ä¸‹é¡¹ç›®ä¸­çš„äº®ç‚¹å’Œæ€»ä½“å®ç°ã€‚

### æ€»ä½“è®¾è®¡

ç¥ç¦å¢™ç”±å¤šä¸ªç¥ç¦å¡ç‰‡ç»„æˆï¼Œå½“æ‰“å¼€ç¥ç¦å¢™åï¼Œæ ¹æ®ç”¨æˆ·ç¥ç¦éšæœºç”Ÿæˆç¥ç¦å¡ç‰‡åŠå…¶ä½ç½®ã€‚ç¥ç¦å¡ç‰‡æœ‰äº”ç§ï¼Œå°åŒ…é¢„å…ˆå†™å¥½äº†äº”ç§å¡ç‰‡å¯¹åº”çš„ CSS æ ·å¼ã€‚

**Step1: å®šä¹‰å¡ç‰‡æ¨¡æ¿ç”Ÿæˆå‡½æ•°**

```js
// é¡¹ç›®è™½ç„¶æœ‰äº”ç§æ¨¡æ¿ï¼Œå•æ ¸å¿ƒåªæœ‰ä¸‰ç§
const hopeTemplate = function (option) {
  switch (option.id) {
    case 1:
      return `<div class="card-wrap">
      <div class="card">
        <div class="card-content">
          <div class="avatar">
            <img src="${option.avatar}" alt="" />
          </div>
          <h4>${option.name}</h4>
          <div class="hope">${option.hope}</div>
          <div class="img-wrap img-2">
            <img src="https://assets.codepen.io/1462889/sea.png" alt="" />
          </div>
          <div class="img-wrap img-3">
            <img src="https://assets.codepen.io/1462889/water.png" alt="" />
          </div>
        </div>
      </div>
    </div>`;
    case 2:
      return `<div class="card-wrap">
        <div class="card">
          <div class="card-content">
            <div class="avatar">
              <img src="${option.avatar}" alt="" />
            </div>
            <h4 class="username">${option.name}</h4>
            <div class="hope">${option.hope}</div>
            <div class="img-wrap img-2">
              <img src="https://assets.codepen.io/1462889/grass.png" alt="" />
            </div>
  
            <div class="img-wrap img-5">
              <img src="https://assets.codepen.io/1462889/Ivy.png" alt="" />
            </div>
          </div>
        </div>
      </div>`;
    default:
      return `<div class="card-wrap">
        <div class="card ${option.class}">
          <div class="card-content">
            <div class="avatar">
              <img src="${option.avatar}" alt="" />
            </div>
            <h4 class="username">${option.name}</h4>
            <div class="hope">${option.hope}</div>
          </div>
        </div>
      </div>`;
  }
};
```

**Step2ï¼šæ ¹æ®ç¥ç¦è¯­æ’å…¥æ¨¡æ¿**

```js
//åˆ›å»ºç¥ç¦é¡µ
let createItem = function (hopeItem) {
  // åˆ©ç”¨éšæœºæ•°é€‰æ‹©æ¨¡æ¿
  const id = randomNtoM(1, 5);
  const template = hopeTemplate({ id, ...hopeItem, class: background[id] });
  // drag å‡½æ•°å®šä¹‰äº†å¡ç‰‡çš„æ‹–æ‹½
  $(template).appendTo(container).drag();
};
```

**Step3: è®¾ç½®å¡ç‰‡çš„ä½ç½®åŠé¢œè‰²**

```js
const $this = $(this);
const parent = $this.parent();
const hopeColor = randomNtoM(0, 6);

// è®¾ç½®ç”¨æˆ·åé¢œè‰²å’Œç¥ç¦è¯­é¢œè‰²
$(this).find(".hope").css({ color: colors[hopeColor] });
$(this).find("h4").css({ color: "#000" });

const pw = parent.width();
const ph = parent.height();
// è·å–å¡ç‰‡ä½ç½®
const thisWidth =
  $this.width() +
  parseInt($this.css("padding-left"), 10) +
  parseInt($this.css("padding-right"), 10);
const thisHeight =
  $this.height() +
  parseInt($this.css("padding-top"), 10) +
  parseInt($this.css("padding-bottom"), 10);
let x, y, positionX, positionY;
let isDown = false;
// è®¾ç½®å¡ç‰‡çš„ä½ç½®
// é¿å…å¡ç‰‡æ˜¾ç¤ºå‡ºç•Œ
const randY = parseInt(Math.random() * (ph - thisHeight), 10);
const randX = parseInt(Math.random() * (pw - thisWidth), 10);

// è®¾ç½®ä½ç½®
$this.css({
  top: randY,
  left: randX,
});
```

### åŠ¨æ€å¤´åƒ

è®©å¤´åƒåŠ¨èµ·æ¥å…¶å®å¹¶ä¸éš¾ï¼Œé¦–å…ˆçœ‹ä¸€ä¸‹æœ€ç»ˆçš„å®ç°æ•ˆæœ:

![](./images/avatar-move.gif)

å’±ä»¬æ¥çœ¨çœ¼è¡¥å¸§ä¸€ä¸‹ï¼Œå¯ä»¥å‘ç°æ¯å¸§å›¾åƒçš„å›¾åƒéƒ½æœ‰æ‰€å·®å¼‚ï¼Œä½†ä»”ç»†çœ‹å…¶å®å°±æ˜¯å››å‘¨æ¤­åœ†è§’çš„å˜åŒ–ã€‚

æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ border-radius æ¥è®¾ç½®åœ†è§’ï¼Œä½†å¦‚æœå¦‚ä¸‹è®¾ç½® border-radius: 30%/70%ï¼Œåˆ™å¯ä»¥å®ç°æ¤­åœ†è§’æ•ˆæœã€‚(å›¾æº: [CSS å®ç°éšæœºä¸è§„åˆ™åœ†è§’å¤´åƒ](https://juejin.cn/post/7034396555738251301))

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4e3bf676fb974175b53189998c2e953a~tplv-k3u1fbpfcp-zoom-in-crop-mark:1304:0:0:0.awebp?)

åŸºäº animation è®¾ç½®å¤šä¸ªçŠ¶æ€çš„ border-radius ï¼Œå°±å¯ä»¥å®ç°åŠ¨æ€çš„æ¤­åœ†å˜åŒ–ï¼Œå®ç°åŠ¨æ€å¤´åƒã€‚

```css
@keyframes border-transform {
  0%,
  100% {
    border-radius: 63% 37% 54% 46% / 55% 48% 52% 45%;
  }
  14% {
    border-radius: 40% 60% 54% 46% / 49% 60% 40% 51%;
  }
  28% {
    border-radius: 54% 46% 38% 62% / 49% 70% 30% 51%;
  }
  42% {
    border-radius: 61% 39% 55% 45% / 61% 38% 62% 39%;
  }
  56% {
    border-radius: 61% 39% 67% 33% / 70% 50% 50% 30%;
  }
  70% {
    border-radius: 50% 50% 34% 66% / 56% 68% 32% 44%;
  }
  84% {
    border-radius: 46% 54% 50% 50% / 35% 61% 39% 65%;
  }
}

.card-content .avatar img {
  position: absolute;
  z-index: 2;
  width: 36px;
  height: 36px;
  display: block;
  left: 50%;
  transform: translate(-50%, -50%);
  box-shadow: 0 6px 20px 0 rgba(16, 39, 112, 0.3);
  animation: border-transform 6s linear infinite;
}
```

### æ‹–æ‹½æ•ˆæœ

æ‹–æ‹½æ•ˆæœæ˜¯è€ç”Ÿé•¿è°ˆäº†ï¼Œé€šå¸¸éœ€è¦ç›‘å¬ä¸‰ä¸ªäº‹ä»¶: mousedownã€mouseupã€mousemoveã€‚

**Event1ï¼šmousedown äº‹ä»¶**:

mousedown äº‹ä»¶ä¸»è¦æœ‰ä¸‹é¢å‡ ä»¶äº‹è¦åš:

- è®°å½•é¼ æ ‡çš„ä½ç½®
- è®°å½•å¡ç‰‡çš„ä½ç½®
- å¢å¤§å½“å‰å¡ç‰‡çš„ zIndex ï¼Œé¿å…å®ƒè¢«é®ä½
- åŠ é”

```js
mousedown(function (e) {
  // è®¾ç½®å½“å‰å¡ç‰‡zIndexæœ€å¤§
  parent.children().css({
    zIndex: "0",
  });
  $this.css({
    zIndex: "1",
  });
  isDown = true;
  x = e.pageX;
  y = e.pageY;
  positionX = $this.position().left;
  positionY = $this.position().top;
  return false;
});
```

**Event2ï¼šmousemove äº‹ä»¶**:

mousemove æ˜¯æ‹–æ‹½éƒ¨åˆ†çš„æ ¸å¿ƒï¼Œå®ƒéœ€è¦å¤„ç†:

- æ ¹æ®æ–°é¼ æ ‡ä½ç½®è®¡ç®—å¡ç‰‡æ–°ä½ç½®ï¼Œä¿®æ”¹å¡ç‰‡çš„ left ä¸ top å€¼
- åˆ¤æ–­ä¸´ç•Œæ¡ä»¶ï¼Œé¿å…å¡ç‰‡ç§»å‡ºé¡µé¢

```js
mousemove(function (e) {
  let xPage = e.pageX;
  let moveX = positionX + xPage - x;

  let yPage = e.pageY;
  let moveY = positionY + yPage - y;

  if (isDown == true) {
    $this.css({
      left: moveX,
      top: moveY,
    });
  } else {
    return;
  }
  if (moveX < 0) {
    $this.css({
      left: "0",
    });
  }
  if (moveX > pw - thisWidth) {
    $this.css({
      left: pw - thisWidth,
    });
  }
  if (moveY < 0) {
    $this.css({
      top: "0",
    });
  }
  if (moveY > ph - thisHeight) {
    $this.css({
      top: ph - thisHeight,
    });
  }
});
```

**Event3ï¼šmouseup äº‹ä»¶**:

mouseup äº‹ä»¶å°±ç›¸å¯¹ç®€å•å¤šäº†ï¼Œè§£é”å³å¯ã€‚

```js
mouseup(function (e) {
  isDown = false;
});
```
